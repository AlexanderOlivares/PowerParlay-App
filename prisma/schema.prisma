generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model Matchups {
  id             String  @id @unique @default(uuid())
  drawEligible   Boolean
  idEvent        String
  idHomeTeam     String
  idAwayTeam     String
  idLeague       String
  strEvent       String
  strLeague      String
  strHomeTeam    String
  strAwayTeam    String
  strTimestamp   String
  strThumb       String
  oddsType       String
  oddsScope      String
  drawTeam       String?
  adminSelected  Boolean
  used           Boolean
  locked         Boolean
  adminUnlocked  Boolean
  adminCorrected Boolean
  awayScore      Int?
  homeScore      Int?
  pointsTotal    Int?
  status         String
  Odds           Odds[]
  Pick           Pick[]
}

model Odds {
  id         String   @id @unique @default(uuid())
  matchupId  String
  oddsGameId Int
  sportsbook String
  homeOdds   Int?
  awayOdds   Int?
  homeSpread Float?
  awaySpread Float?
  total      Float?
  lastUpdate String
  drawOdds   Int?
  overOdds   Int?
  underOdds  Int?
  matchups   Matchups @relation(fields: [matchupId], references: [id])
  picks      Pick[]
}

model Account {
  id                String  @id @default(cuid())
  userId            String
  type              String
  provider          String
  providerAccountId String
  refresh_token     String? @db.Text
  access_token      String? @db.Text
  expires_at        Int?
  token_type        String?
  scope             String?
  id_token          String? @db.Text
  session_state     String?

  user User @relation(fields: [userId], references: [id], onDelete: Cascade)

  @@unique([provider, providerAccountId])
}

model Session {
  id           String   @id @default(cuid())
  sessionToken String   @unique
  userId       String
  expires      DateTime
  user         User     @relation(fields: [userId], references: [id], onDelete: Cascade)
}

model User {
  id            String    @id @default(cuid())
  name          String?
  email         String?   @unique
  emailVerified DateTime?
  image         String?
  accounts      Account[]
  sessions      Session[]
  picks         Pick[]
  parlays       Parlay[]
}

model VerificationToken {
  identifier String
  token      String   @unique
  expires    DateTime

  @@unique([identifier, token])
}

model Pick {
  id            String   @id @unique @default(uuid())
  user          User     @relation(fields: [userId], references: [id])
  userId        String
  parlay        Parlay   @relation(fields: [parlayId], references: [id])
  parlayId      String
  odds          Odds     @relation(fields: [oddsId], references: [id])
  oddsId        String
  matchup       Matchups @relation(fields: [matchupId], references: [id])
  matchupId     String
  locked        Boolean
  useLatestOdds Boolean
  pick          String
  result        String
}

model Parlay {
  id     String @id @unique @default(uuid())
  user   User   @relation(fields: [userId], references: [id])
  userId String
  picks  Pick[]
}
